<html><head><link rel="prefetch" href="lazy-resources.html"><link rel="prefetch" href="shop-404-warning.html"></head><body><div hidden="" by-polymer-bundler=""><link rel="import" href="shop-app.html"><script>Polymer.PaperItemBehaviorImpl={hostAttributes:{role:'option',tabindex:'0'}},Polymer.PaperItemBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperItemBehaviorImpl];</script><dom-module id="paper-item-shared-styles" assetpath="../bower_components/paper-item/"><template><style>:host, .paper-item{display:block;position:relative;min-height:var(--paper-item-min-height, 48px);padding:0px 16px;}.paper-item{@apply --paper-font-subhead;border:none;outline:none;background:white;width:100%;text-align:left;}:host([hidden]), .paper-item[hidden]{display:none !important;}:host(.iron-selected), .paper-item.iron-selected{font-weight:var(--paper-item-selected-weight, bold);@apply --paper-item-selected;}:host([disabled]), .paper-item[disabled]{color:var(--paper-item-disabled-color, var(--disabled-text-color));@apply --paper-item-disabled;}:host(:focus), .paper-item:focus{position:relative;outline:0;@apply --paper-item-focused;}:host(:focus):before, .paper-item:focus:before{@apply --layout-fit;background:currentColor;content:'';opacity:var(--dark-divider-opacity);pointer-events:none;@apply --paper-item-focused-before;}</style></template></dom-module><dom-module id="paper-icon-item" assetpath="../bower_components/paper-item/"><template><style include="paper-item-shared-styles"></style><style>:host{@apply --layout-horizontal;@apply --layout-center;@apply --paper-font-subhead;@apply --paper-item;@apply --paper-icon-item;}.content-icon{@apply --layout-horizontal;@apply --layout-center;width:var(--paper-item-icon-width, 56px);@apply --paper-item-icon;}</style><div id="contentIcon" class="content-icon"><slot name="item-icon"></slot></div><slot></slot></template><script>Polymer({is:'paper-icon-item',behaviors:[Polymer.PaperItemBehavior]});</script></dom-module><dom-module id="paper-item-body" assetpath="../bower_components/paper-item/"><template><style>:host{overflow:hidden;@apply --layout-vertical;@apply --layout-center-justified;@apply --layout-flex;}:host([two-line]){min-height:var(--paper-item-body-two-line-min-height, 72px);}:host([three-line]){min-height:var(--paper-item-body-three-line-min-height, 88px);}:host > ::slotted(*){overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}:host > ::slotted([secondary]){@apply --paper-font-body1;color:var(--paper-item-body-secondary-color, var(--secondary-text-color));@apply --paper-item-body-secondary;}</style><slot></slot></template><script>Polymer({is:'paper-item-body'});</script></dom-module></div><dom-module id="shop-addrandr"><template><style include="shop-common-styles shop-button shop-form-styles shop-input shop-select">.main-frame{transition:opacity 0.5s;}:host([waiting]) .main-frame{opacity:0.1;}paper-icon-button{color:var(--app-primary-color);}.logo{text-align:center;}.logo a{font-size:20px;font-weight:600;letter-spacing:0.3em;color:var(--app-white-color);text-decoration:none;display:inline-block;pointer-events:auto;}.left-bar-item{width:40px;}app-header{@apply (--layout-fixed-top);z-index:1;background-color:#1976D2;--app-header-shadow:{box-shadow:inset 0px 5px 6px -3px rgba(0, 0, 0, 0.2);height:10px;bottom:-10px;};}shop-input, shop-select{font-size:16px;}shop-select{margin-bottom:20px;}paper-spinner-lite{position:fixed;top:calc(50% - 14px);left:calc(50% - 14px);}.papericonitem{margin:-13px -16px;}.papericonitemimg{border-radius:50%;width:100px;height:100px;}progress{width:100%;margin-bottom:5px;-webkit-appearance:none;appearance:none;}.grid{margin-top:40px;@apply (--layout-horizontal);}.fullwidth{width:100%;}.grid > section{@apply (--layout-flex);}.grid > section:not(:first-child){margin-left:80px;}.row{@apply (--layout-horizontal);@apply (--layout-end);}.column{@apply (--layout-vertical);}.row > .flex,
      .input-row > *{@apply (--layout-flex);}.input-row > *:not(:first-child){margin-left:8px;}.shop-select-label{line-height:20px;}.total-row{font-weight:500;margin:30px 0;}.winner{padding:10px 0px;margin-left:15px;@apply (--file-upload-file);}.enabled{border:1px solid #555;@apply (--file-upload-upload-border-enabled);}.hover{opacity:.7;border:1px dashed #111;@apply (--file-upload-upload-border-hover);}#UploadBorder{vertical-align:middle;color:#555;padding-top:20px;padding-bottom:20px;max-height:300px;width:100%;overflow-y:auto;margin-top:15px;display:inline-block;border:1px solid #555;@apply (--file-upload-upload-border);}#dropArea{text-align:center;@apply (--file-upload-drop-area);}.commands{float:right;margin-right:10px;@apply (--file-upload-commands);}.commands iron-icon:not([icon="check-circle"]){cursor:pointer;opacity:.9;@apply (--file-upload-commands-faded);}.commands iron-icon:hover{opacity:1;@apply (--file-upload-commands-hovered);}[hidden]{display:none;}@media (max-width: 767px){.grid{display:block;margin-top:0;}.grid > section:not(:first-child){margin-left:0;}.papericonitemimg{border-radius:50%;width:80px;height:80px;}}</style><firebase-auth id="auth" provider="email" signed-in="{{signedIn}}" user="{{user}}" on-error="handleError"></firebase-auth><firebase-document path="/users" data="{{usersdata}}"></firebase-document><app-indexeddb-mirror session="[[user.uid]]" key="userslist" data="{{usersdata}}" persisted-data="{{users}}"></app-indexeddb-mirror><app-header role="navigation" id="header" effects="waterfall" hidden="[[!signedin]]" condenses="" reveals=""><app-toolbar><div class="left-bar-item"><paper-icon-button class="menu-btn" icon="menu" on-click="_toggleDrawer" aria-label="Categories"></paper-icon-button></div><div class="logo" main-title=""><a href="#/" aria-label="SHOP Home">PROJECTAGRAM</a></div></app-toolbar></app-header><div class="main-frame"><iron-pages selected="[[state]]" attr-for-selected="state"><div state="init"><form id="checkoutForm" is="iron-form" method="post" action="/data/sample_success_response.json" on-iron-form-response="_didReceiveResponse" on-iron-form-presubmit="_willSendRequest"><header class="subsection" visible$="{{hideFileListRe}}"><h1>Add Rewards and Regonition</h1><span>Please fill all the details of the R &amp; R properly...!!!!</span></header><div class="subsection grid" visible$="{{hideFileListRe}}"><section><h2 id="randrInfoHeading">R and R Details</h2><div class="row input-row"><div class="column"><shop-select><select id="date" name="date" required="" autocomplete="date" aria-label="Date"><option value="1st" selected="">01</option><option value="2nd">02</option><option value="3rd">03</option><option value="4th">04</option><option value="5th">05</option><option value="6th">06</option><option value="7th">07</option><option value="8th">08</option><option value="9th">09</option><option value="10th">10</option><option value="11th">11</option><option value="12th">12</option><option value="13th">13</option><option value="14th">14</option><option value="15th">15</option><option value="16th">16</option><option value="17th">17</option><option value="18th">18</option><option value="19th">19</option><option value="20th">20</option><option value="21st">21</option><option value="22nd">22</option><option value="23rd">23</option><option value="24th">24</option><option value="25th">25</option><option value="26th">26</option><option value="27th">27</option><option value="28th">28</option><option value="29th">29</option><option value="30th">30</option><option value="31st">31</option></select><shop-md-decorator aria-hidden="true"><shop-underline></shop-underline></shop-md-decorator></shop-select></div><div class="column"><shop-select><select id="month" name="month" required="" autocomplete="month" aria-label="Month"><option value="January" selected="">January</option><option value="February">February</option><option value="March">March</option><option value="April">April</option><option value="May">May</option><option value="June">June</option><option value="July">July</option><option value="August">August</option><option value="September">September</option><option value="October">October</option><option value="November">November</option><option value="December">December</option></select><shop-md-decorator aria-hidden="true"><shop-underline></shop-underline></shop-md-decorator></shop-select></div><div class="column"><shop-select><select id="year" name="year" required="" autocomplete="year" aria-label="Year"><option value="2016">2016</option><option value="2017" selected="">2017</option><option value="2018">2018</option><option value="2019">2019</option><option value="2020">2020</option><option value="2021">2021</option><option value="2022">2022</option><option value="2023">2023</option><option value="2024">2024</option></select><shop-md-decorator aria-hidden="true"><shop-underline></shop-underline></shop-md-decorator></shop-select></div></div><div class="row input-row"><shop-input><input type="textArea" id="accountDescription" name="accountDescription" placeholder="Description" required="" aria-labelledby="accountDescriptionLabel randrInfoHeading"><shop-md-decorator error-message="Invalid Description" aria-hidden="true"><label id="accountDescriptionLabel">Description</label><shop-underline></shop-underline></shop-md-decorator></shop-input></div></section><section><h2 id="usersInfoHeading">Users List</h2><div class="row input-row"><shop-input><vaadin-combo-box id="elementsbox" items="[[_toArrayUsers(users)]]" item-value-path="name" item-label-path="fullname" on-selected-item-changed="_itemselectedchanged"><template><paper-icon-item style="padding: 0"><paper-item-body two-line="" style="min-height: 0"><div style="text-transform: capitalize">[[item.fullname]]</div><div secondary="">[[item.email]]</div></paper-item-body></paper-icon-item></template></vaadin-combo-box><div id="UploadBorder" hidden$="{{hideFileList}}"><div id="dropArea">The winners are:</div><template is="dom-repeat" items="{{winners}}"><div class="winner"><div class="name"><span>{{item.fullname}}</span><div class="commands"><iron-icon icon="file-upload-icons:cancel" title="{{removeText}}" on-click="_cancelWinner" hidden$="{{item.complete}}"></iron-icon></div></div></div></template></div></shop-input></div></section></div><shop-button fullwidth="" responsive="" id="submitBox"><input class="fullwidth" type="button" on-click="_submit" value="ADD R-AND-R"></shop-button></form></div><header state="success"><h1>Thank you</h1><p>[[response.successMessage]]</p><shop-button responsive=""><a href="#/home">Go to Home</a></shop-button></header><header state="error"><h1>We couldn´t add the r and r at this moment.</h1><p id="errorMessage">[[response.errorMessage]]</p><shop-button responsive=""><a href="#/adduser">Try again</a></shop-button></header></iron-pages></div><app-route route="[[route]]" pattern="/:state" on-active-changed="_activeRouteHandler"></app-route><paper-spinner-lite active="[[waiting]]"></paper-spinner-lite></template><script>Polymer({is:'shop-addrandr',properties:{route:{type:Object,notify:!0},users:{type:Object,notify:!0},state:{type:String,value:'init'},winners:{type:Array,notify:!0,value:function(){return[]}},response:Object,visible:{type:Boolean,observer:'_visibleChanged'},hideFileList:{type:Boolean,value:!1},hideFileListRe:{type:Boolean,value:!0},waiting:{type:Boolean,readOnly:!0,reflectToAttribute:!0}},_toggleDrawer:function(){this.fire('toggle-drawer',null)},_submit:function(){if(this._validateForm())if(null==this.winners||0==this.winners.length){var c=document.createElement('shop-snackbar');Polymer.dom(this.root).appendChild(c),Polymer.dom(c).innerHTML='Please add some winners to continue',c.open()}else{this.$.checkoutForm.fire('iron-form-presubmit',null,{bubbles:!1});var d=this.$.auth.app,f=-1*Date.now(),g={title:this.$.month.value+' '+this.$.year.value,date:this.$.date.value+' '+this.$.month.value+' '+this.$.year.value,discussion:this.$.accountDescription.value,_timestamp:f},h=d.database().ref().child('randr').push().key,j={};if(j['/randr/'+h]=g,d.database().ref().update(j),this.winners)for(var m,k=this.winners.length,l=0;l<k;l++)m=this.winners[l],d.database().ref().child('/randr/'+h+'/winners/'+m.name).set(m.name);this.debounce('_submitForm',function(){this.$.checkoutForm.fire('iron-form-response',{response:{success:1,successMessage:'R and R Added Successfully..!!'}},{bubbles:!1})},1e3)}},_pushState:function(b){this._validState=b,this.set('route.path',b);Polymer.AppLayout.scroll({top:0,behavior:'silent'})},cancel:function(b){b&&this.splice('winners',this.winners.indexOf(b),1)},_cancelWinner:function(b){this.cancel(b.model.__data__.item)},_activeRouteHandler:function(b){var c=b.target;if(b.detail.value){var d=c.data.state;if(this._validState===d)return this.state=d,void(this._validState='')}this.state='init'},_reset:function(){var b=this.$.checkoutForm;this._setWaiting(!1),b.reset(),this.set('winners',[]);for(var c,d=0;c=b.elements[d],d<b.elements.length;d++)c.removeAttribute('aria-invalid')},_validateForm:function(){for(var d,b=this.$.checkoutForm,c=!1,f=0;d=b.elements[f],f<b.elements.length;f++)d.checkValidity()?d.removeAttribute('aria-invalid'):(c||(d.nextElementSibling&&this.fire('announce',d.nextElementSibling.getAttribute('error-message')),d.scrollIntoViewIfNeeded?d.scrollIntoViewIfNeeded():d.scrollIntoView(!1),d.focus(),c=!0),d.setAttribute('aria-invalid','true'));return!c},_willSendRequest:function(b){var c=b.target,d=c.request.body;this._setWaiting(!0)},_didReceiveResponse:function(b){var c=b.detail.response;this.response=c,this._setWaiting(!0),c.success?(this._pushState('success'),this._reset()):(this._pushState('error'),this._reset())},_itemselectedchanged:function(b){if(b.detail&&null!=b.detail.value){var c=b.detail.value;c.complete=!1,-1==this.winners.indexOf(c)&&this.push('winners',c)}},_visibleChanged:function(b){b&&(this._reset(),this.fire('change-section',{title:'Add R&R'}))},_toArray:function(b){return Object.keys(b).map(function(c){return{name:c,value:b[c]}})},_toArrayUsers:function(b){return Object.keys(b).map(function(c){return{name:c,fullname:b[c].name,email:b[c].emailId}})}});</script></dom-module></body></html>