<html><head><link rel="prefetch" href="lazy-resources.html"><link rel="prefetch" href="shop-404-warning.html"></head><body><div hidden="" by-polymer-bundler=""><link rel="import" href="shop-app.html"></div><dom-module id="shop-adduser"><template><style include="shop-common-styles shop-button shop-form-styles shop-input shop-select shop-checkbox">.main-frame{transition:opacity 0.5s;}:host([waiting]) .main-frame{opacity:0.1;}paper-icon-button{color:var(--app-primary-color);}.logo{text-align:center;}.logo a{font-size:20px;font-weight:600;letter-spacing:0.3em;color:var(--app-white-color);text-decoration:none;display:inline-block;pointer-events:auto;}.left-bar-item{width:40px;}app-header{@apply (--layout-fixed-top);z-index:1;background-color:#1976D2;--app-header-shadow:{box-shadow:inset 0px 5px 6px -3px rgba(0, 0, 0, 0.2);height:10px;bottom:-10px;};}shop-input, shop-select{font-size:16px;}shop-select{margin-bottom:20px;}paper-spinner-lite{position:fixed;top:calc(50% - 14px);left:calc(50% - 14px);}progress{width:100%;margin-bottom:5px;-webkit-appearance:none;appearance:none;}.grid{margin-top:40px;@apply (--layout-horizontal);}.grid > section{@apply (--layout-flex);}.grid > section:not(:first-child){margin-left:80px;}.row{@apply (--layout-horizontal);@apply (--layout-end);}.column{@apply (--layout-vertical);}.row > .flex,
      .input-row > *{@apply (--layout-flex);}.input-row > *:not(:first-child){margin-left:8px;}.shop-select-label{line-height:20px;}.order-summary-row{line-height:24px;}.total-row{font-weight:500;margin:30px 0;}@media (max-width: 767px){.grid{display:block;margin-top:0;}.grid > section:not(:first-child){margin-left:0;}}</style><firebase-auth id="auth" provider="email" signed-in="{{signedIn}}" user="{{user}}" on-error="handleError"></firebase-auth><firebase-document path="/teams" data="{{teamdata}}"></firebase-document><app-indexeddb-mirror session="[[user.uid]]" key="teams" data="{{teamdata}}" persisted-data="{{persistedData}}"></app-indexeddb-mirror><app-header role="navigation" id="header" effects="waterfall" hidden="[[!signedin]]" condenses="" reveals=""><app-toolbar><div class="left-bar-item"><paper-icon-button class="menu-btn" icon="menu" on-click="_toggleDrawer" aria-label="Categories"></paper-icon-button></div><div class="logo" main-title=""><a href="#/" aria-label="SHOP Home">PROJECTAGRAM</a></div></app-toolbar></app-header><div class="main-frame"><iron-pages selected="[[state]]" attr-for-selected="state"><div state="init"><form id="checkoutForm" is="iron-form" method="post" action="/data/sample_success_response.json" on-iron-form-response="_didReceiveResponse" on-iron-form-presubmit="_willSendRequest"><header class="subsection" visible$="{{hideFileListRe}}"><h1>Add User</h1><span>Please fill all the details of the user properly...!!!!</span></header><div class="subsection grid" visible$="{{hideFileListRe}}"><section><h2 id="fileUploadHeading">Upload Profile Pic</h2><div class="row input-row"><shop-input><input id="fileButt" name="fileButt" type="file" value="upload" accept="[[fileType]]" required="" aria-labelledby="profilepicLabel accountInfoHeading" placeholder="Email"><shop-md-decorator error-message="Invalid File" aria-hidden="true"><label id="profilepicLabel">Profile Pic</label><shop-underline></shop-underline></shop-md-decorator></shop-input></div></section><section><h2 id="accountInfoHeading">Account Information</h2><div class="row input-row"><shop-input><input type="email" id="accountEmail" name="accountEmail" placeholder="Email" required="" aria-labelledby="accountEmailLabel accountInfoHeading"><shop-md-decorator error-message="Invalid Email" aria-hidden="true"><label id="accountEmailLabel">Email</label><shop-underline></shop-underline></shop-md-decorator></shop-input></div><div class="row input-row"><shop-input><input type="text" id="accountPassword" name="accountPassword" placeholder="Password" pattern="(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).[0-9A-Za-z]{7,}" required="" aria-labelledby="accountPasswordLabel accountInfoHeading"><shop-md-decorator error-message="At least one number and one uppercase,one lowercase letter,8 or more characters" aria-hidden="true"><label id="accountPasswordLabel">Password</label><shop-underline></shop-underline></shop-md-decorator></shop-input></div><div class="row input-row"><shop-input><input type="tel" id="accountPhone" name="accountPhone" pattern="\d{10,}" placeholder="Phone Number" required="" aria-labelledby="accountPhoneLabel accountInfoHeading"><shop-md-decorator error-message="Invalid Phone Number" aria-hidden="true"><label id="accountPhoneLabel">Phone Number</label><shop-underline></shop-underline></shop-md-decorator></shop-input></div><h2 id="shipAddressHeading">Personal Details</h2><div class="row input-row"><shop-input><input type="text" id="fullName" name="fullName" pattern=".{4,}" placeholder="Full Name" required="" aria-labelledby="fullNameLabel shipAddressHeading"><shop-md-decorator error-message="Invalid Name.. Minimum 4 letters..!!" aria-hidden="true"><label id="fullNameLabel">Full Name</label><shop-underline></shop-underline></shop-md-decorator></shop-input></div><div class="row input-row"><div class="column"><label for="team">Team</label><shop-select><select id="team" name="team" required="" autocomplete="team" aria-label="Team"><template is="dom-repeat" items="[[_toArray(persistedData)]]" strip-whitespace=""><option value="[[item.name]]" selected="">[[item.value.title]]</option></template></select><shop-md-decorator aria-hidden="true"><shop-underline></shop-underline></shop-md-decorator></shop-select></div></div><div class="row input-row"><shop-input><input type="text" id="designation" name="designation" pattern=".{4,}" placeholder="Designation" required="" aria-labelledby="designationLabel shipAddressHeading"><shop-md-decorator error-message="Invalid Designation.. Minimum 4 letters..!!" aria-hidden="true"><label id="designationLabel">Designation</label><shop-underline></shop-underline></shop-md-decorator></shop-input></div><div class="row input-row"><div class="column"><label for="dateOfBirth">Date Of Birth</label><shop-select><select id="month" name="month" required="" autocomplete="month" aria-label="Month"><option value="January" selected="">January</option><option value="February">February</option><option value="March">March</option><option value="April">April</option><option value="May">May</option><option value="June">June</option><option value="July">July</option><option value="August">August</option><option value="September">September</option><option value="October">October</option><option value="November">November</option><option value="December">December</option></select><shop-md-decorator aria-hidden="true"><shop-underline></shop-underline></shop-md-decorator></shop-select></div><div class="column"><shop-select><select id="date" name="date" required="" autocomplete="date" aria-label="Date"><option value="1st" selected="">01</option><option value="2nd">02</option><option value="3rd">03</option><option value="4th">04</option><option value="5th">05</option><option value="6th">06</option><option value="7th">07</option><option value="8th">08</option><option value="9th">09</option><option value="10th">10</option><option value="11th">11</option><option value="12th">12</option><option value="13th">13</option><option value="14th">14</option><option value="15th">15</option><option value="16th">16</option><option value="17th">17</option><option value="18th">18</option><option value="19th">19</option><option value="20th">20</option><option value="21st">21</option><option value="22nd">22</option><option value="23rd">23</option><option value="24th">24</option><option value="25th">25</option><option value="26th">26</option><option value="27th">27</option><option value="28th">28</option><option value="29th">29</option><option value="30th">30</option><option value="31st">31</option></select><shop-md-decorator aria-hidden="true"><shop-underline></shop-underline></shop-md-decorator></shop-select></div></div></section><section><h2 id="otherInfoHeading">Other Details</h2><div class="row input-row"><shop-input><input type="text" id="education" name="education" pattern=".{4,}" placeholder="Education" required="" aria-labelledby="educationLabel otherInfoHeading"><shop-md-decorator error-message="Invalid Education.. Minimum 4 letters..!!" aria-hidden="true"><label id="educationLabel">Education</label><shop-underline></shop-underline></shop-md-decorator></shop-input></div><div class="row input-row"><shop-input><input type="text" id="passion" name="passion" pattern=".{4,}" placeholder="Passion" required="" aria-labelledby="passionLabel otherInfoHeading"><shop-md-decorator error-message="Invalid Passion.. Minimum 4 letters..!!" aria-hidden="true"><label id="passionLabel">Passion</label><shop-underline></shop-underline></shop-md-decorator></shop-input></div><div class="row input-row"><shop-input><input type="text" id="shortBio" name="shortBio" pattern=".{4,}" placeholder="Short Bio" required="" aria-labelledby="shortBioLabel otherInfoHeading"><shop-md-decorator error-message="Invalid Bio.. Minimum 4 letters..!!" aria-hidden="true"><label id="shortBioLabel">Short Bio</label><shop-underline></shop-underline></shop-md-decorator></shop-input></div><div class="row input-row"><shop-input><input type="text" id="fblink" name="fblink" pattern=".{2,}" placeholder="Facebook Link" required="" aria-labelledby="fblinkLabel otherInfoHeading"><shop-md-decorator error-message="Invalid Facebook Link" aria-hidden="true"><label id="fblinkLabel">Facebook Link</label><shop-underline></shop-underline></shop-md-decorator></shop-input></div><div class="row input-row"><shop-input><input type="text" id="linkedin" name="linkedin" pattern=".{2,}" placeholder="LinkedIn" required="" aria-labelledby="linkedinLabel otherInfoHeading"><shop-md-decorator error-message="Invalid LinkedIn" aria-hidden="true"><label id="linkedinLabel">LinkedIn</label><shop-underline></shop-underline></shop-md-decorator></shop-input></div><shop-button responsive="" id="submitBox"><input type="button" on-click="_submit" value="Add User"></shop-button></section></div></form></div><header state="success"><h1>Thank you</h1><p>[[response.successMessage]]</p><shop-button responsive=""><a href="#/home">Go to Home</a></shop-button></header><header state="error"><h1>We couldnÂ´t add the user at this moment.</h1><p id="errorMessage">[[response.errorMessage]]</p><shop-button responsive=""><a href="#/adduser">Try again</a></shop-button></header></iron-pages></div><app-route route="[[route]]" pattern="/:state" on-active-changed="_activeRouteHandler"></app-route><paper-spinner-lite active="[[waiting]]"></paper-spinner-lite></template><script>Polymer({is:'shop-adduser',properties:{route:{type:Object,notify:!0},state:{type:String,value:'init'},response:Object,visible:{type:Boolean,observer:'_visibleChanged'},hideFileListRe:{type:Boolean,value:!0},fileType:{type:String,value:'image/jpeg'},waiting:{type:Boolean,readOnly:!0,reflectToAttribute:!0}},_toggleDrawer:function(){this.fire('toggle-drawer',null)},_submit:function(){if(this._validateForm()){this.$.checkoutForm.fire('iron-form-presubmit',null,{bubbles:!1});var c=this;this.$.auth.createUserWithEmailAndPassword(this.$.accountEmail.value,this.$.accountPassword.value).then(function(d){var f=c.$.auth.app,g=d.uid;f.database().ref('users/'+d.uid).set({designation:c.$.designation.value,dob:c.$.date.value+c.$.month.value,education:c.$.education.value,emailId:c.$.accountEmail.value,fblink:c.$.fblink.value,linkedin:c.$.linkedin.value,mobileNum:c.$.accountPhone.value,name:c.$.fullName.value,passion:c.$.passion.value,shortBio:c.$.shortBio.value,team:c.$.team.value});({})[d.uid]='0',f.database().ref('teams/'+c.$.team.value+'/members').child(g).set('0');var j=c.$.fileButt.files[0],k='';k='users/'+d.uid+'.jpg';var l=f.storage().ref(k),m=l.put(j);m.on('state_changed',function(o){100*(o.bytesTransferred/o.totalBytes)},function(){},function(){c.debounce('_submitForm',function(){c.$.checkoutForm.fire('iron-form-response',{response:{success:1,successMessage:'Person Added Successfully..!!'}},{bubbles:!1})},1e3)})}).catch(function(d){var f=d.code,g=d.message;c.debounce('_submitForm',function(){c.$.checkoutForm.fire('iron-form-response',{response:{error:1,errorMessage:g}},{bubbles:!1})},1e3)})}},_pushState:function(b){this._validState=b,this.set('route.path',b);Polymer.AppLayout.scroll({top:0,behavior:'silent'})},_activeRouteHandler:function(b){var c=b.target;if(b.detail.value){var d=c.data.state;if(this._validState===d)return this.state=d,void(this._validState='')}this.state='init'},_reset:function(){var b=this.$.checkoutForm;this._setWaiting(!1),b.reset();for(var c,d=0;c=b.elements[d],d<b.elements.length;d++)c.removeAttribute('aria-invalid')},_validateForm:function(){for(var f,b=this.$.checkoutForm,c=!1,d=this.$.fileButt.files[0],g=0;f=b.elements[g],g<b.elements.length;g++)f.checkValidity()?f.removeAttribute('aria-invalid'):(c||(f.nextElementSibling&&this.fire('announce',f.nextElementSibling.getAttribute('error-message')),f.scrollIntoViewIfNeeded?f.scrollIntoViewIfNeeded():f.scrollIntoView(!1),f.focus(),c=!0),f.setAttribute('aria-invalid','true'));return!c},_willSendRequest:function(b){var c=b.target,d=c.request.body;this._setWaiting(!0)},_didReceiveResponse:function(b){var c=b.detail.response;this.response=c,this._setWaiting(!0),c.success?(this._pushState('success'),this._reset()):(this._pushState('error'),this._reset())},_visibleChanged:function(b){b&&(this._reset(),this.fire('change-section',{title:'Add User'}))},_toArray:function(b){return Object.keys(b).map(function(c){return{name:c,value:b[c]}})}});</script></dom-module></body></html>