<html><head><link rel="import" href="../bower_components/polymerfire/polymerfire.html"><link rel="import" href="../bower_components/app-route/app-route.html"><link rel="import" href="../bower_components/paper-item/paper-icon-item.html"><link rel="import" href="../bower_components/paper-item/paper-item-body.html"><link rel="import" href="../bower_components/app-layout/app-header/app-header.html"><link rel="import" href="../bower_components/app-layout/app-scroll-effects/effects/waterfall.html"><link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html"><link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html"><link rel="import" href="../bower_components/app-storage/app-indexeddb-mirror/app-indexeddb-mirror.html"><link rel="import" href="../bower_components/polymerfire/firebase-auth.html"><link rel="import" href="../bower_components/polymerfire/firebase-document.html"><link rel="import" href="../bower_components/vaadin-combo-box/vaadin-combo-box.html"><link rel="import" href="../bower_components/paper-fab/paper-fab.html"><link rel="import" href="../bower_components/file-upload/file-upload-icons.html"><link rel="import" href="shop-button.html"><link rel="import" href="shop-common-styles.html"><link rel="import" href="shop-form-styles.html"><link rel="import" href="shop-input.html"><link rel="import" href="shop-select.html"><link rel="import" href="shop-checkbox.html"><link rel="prefetch" href="../bower_components/polymerfire/firebase-app.html"><link rel="prefetch" href="../bower_components/polymer/polymer.html"><link rel="prefetch" href="../bower_components/polymer/polymer-mini.html"><link rel="prefetch" href="../bower_components/polymer/polymer-micro.html"><link rel="prefetch" href="../bower_components/polymerfire/firebase-app-script.html"><link rel="prefetch" href="../bower_components/firebase/firebase-app.js"><link rel="prefetch" href="../bower_components/polymerfire/firebase-common-behavior.html"><link rel="prefetch" href="../bower_components/app-storage/app-network-status-behavior.html"><link rel="prefetch" href="../bower_components/polymerfire/firebase-auth-script.html"><link rel="prefetch" href="../bower_components/firebase/firebase-auth.js"><link rel="prefetch" href="../bower_components/polymerfire/firebase-database-behavior.html"><link rel="prefetch" href="../bower_components/app-storage/app-storage-behavior.html"><link rel="prefetch" href="../bower_components/promise-polyfill/promise-polyfill.html"><link rel="prefetch" href="../bower_components/promise-polyfill/promise-polyfill-lite.html"><link rel="prefetch" href="../bower_components/promise-polyfill/Promise.js"><link rel="prefetch" href="../bower_components/promise-polyfill/Promise-Statics.js"><link rel="prefetch" href="../bower_components/polymerfire/firebase-database-script.html"><link rel="prefetch" href="../bower_components/firebase/firebase-database.js"><link rel="prefetch" href="../bower_components/polymerfire/firebase-query.html"><link rel="prefetch" href="../bower_components/polymerfire/firebase-messaging.html"><link rel="prefetch" href="../bower_components/polymerfire/firebase-messaging-script.html"><link rel="prefetch" href="../bower_components/firebase/firebase-messaging.js"><link rel="prefetch" href="../bower_components/polymerfire/firebase-storage-script.html"><link rel="prefetch" href="../bower_components/firebase/firebase-storage.js"><link rel="prefetch" href="../bower_components/paper-styles/typography.html"><link rel="prefetch" href="../bower_components/font-roboto/roboto.html"><link rel="prefetch" href="../bower_components/paper-item/paper-item-behavior.html"><link rel="prefetch" href="../bower_components/iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../bower_components/iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../bower_components/iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../bower_components/paper-item/paper-item-shared-styles.html"><link rel="prefetch" href="../bower_components/paper-styles/color.html"><link rel="prefetch" href="../bower_components/paper-styles/default-theme.html"><link rel="prefetch" href="../bower_components/iron-resizable-behavior/iron-resizable-behavior.html"><link rel="prefetch" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects-behavior.html"><link rel="prefetch" href="../bower_components/iron-scroll-target-behavior/iron-scroll-target-behavior.html"><link rel="prefetch" href="../bower_components/app-layout/helpers/helpers.html"><link rel="prefetch" href="../bower_components/iron-icon/iron-icon.html"><link rel="prefetch" href="../bower_components/iron-meta/iron-meta.html"><link rel="prefetch" href="../bower_components/paper-behaviors/paper-inky-focus-behavior.html"><link rel="prefetch" href="../bower_components/paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../bower_components/paper-ripple/paper-ripple.html"><link rel="prefetch" href="../bower_components/app-storage/app-indexeddb-mirror/app-indexeddb-mirror-client.html"><link rel="prefetch" href="../bower_components/app-storage/app-indexeddb-mirror/common-worker.html"><link rel="prefetch" href="../bower_components/iron-input/iron-input.html"><link rel="prefetch" href="../bower_components/iron-a11y-announcer/iron-a11y-announcer.html"><link rel="prefetch" href="../bower_components/iron-validatable-behavior/iron-validatable-behavior.html"><link rel="prefetch" href="../bower_components/paper-input/paper-input-container.html"><link rel="prefetch" href="../bower_components/paper-input/paper-input-error.html"><link rel="prefetch" href="../bower_components/paper-input/paper-input-addon-behavior.html"><link rel="prefetch" href="../bower_components/vaadin-combo-box/vaadin-combo-box-behavior.html"><link rel="prefetch" href="../bower_components/iron-form-element-behavior/iron-form-element-behavior.html"><link rel="prefetch" href="../bower_components/vaadin-combo-box/vaadin-dropdown-behavior.html"><link rel="prefetch" href="../bower_components/vaadin-combo-box/vaadin-combo-box-overlay.html"><link rel="prefetch" href="../bower_components/iron-list/iron-list.html"><link rel="prefetch" href="../bower_components/paper-styles/shadow.html"><link rel="prefetch" href="../bower_components/vaadin-combo-box/vaadin-overlay-behavior.html"><link rel="prefetch" href="../bower_components/vaadin-combo-box/vaadin-combo-box-item.html"><link rel="prefetch" href="../bower_components/vaadin-combo-box/vaadin-spinner.html"><link rel="prefetch" href="../bower_components/vaadin-combo-box/vaadin-combo-box-shared-styles.html"><link rel="prefetch" href="../bower_components/vaadin-combo-box/vaadin-combo-box-icons.html"><link rel="prefetch" href="../bower_components/iron-iconset-svg/iron-iconset-svg.html"><link rel="prefetch" href="../bower_components/paper-behaviors/paper-button-behavior.html"><link rel="prefetch" href="../bower_components/paper-material/paper-material-shared-styles.html"></head><body><dom-module id="shop-addrandr"><template><style include="shop-common-styles shop-button shop-form-styles shop-input shop-select">.main-frame{transition:opacity 0.5s;}:host([waiting]) .main-frame{opacity:0.1;}paper-icon-button{color:var(--app-primary-color);}.logo{text-align:center;}.logo a{font-size:20px;font-weight:600;letter-spacing:0.3em;color:var(--app-white-color);text-decoration:none;display:inline-block;pointer-events:auto;}.left-bar-item{width:40px;}app-header{@apply (--layout-fixed-top);z-index:1;background-color:#1976D2;--app-header-shadow:{box-shadow:inset 0px 5px 6px -3px rgba(0, 0, 0, 0.2);height:10px;bottom:-10px;};}shop-input, shop-select{font-size:16px;}shop-select{margin-bottom:20px;}paper-spinner-lite{position:fixed;top:calc(50% - 14px);left:calc(50% - 14px);}.papericonitem{margin:-13px -16px;}.papericonitemimg{border-radius:50%;width:100px;height:100px;}progress{width:100%;margin-bottom:5px;-webkit-appearance:none;appearance:none;}.grid{margin-top:40px;@apply (--layout-horizontal);}.fullwidth{width:100%;}.grid > section{@apply (--layout-flex);}.grid > section:not(:first-child){margin-left:80px;}.row{@apply (--layout-horizontal);@apply (--layout-end);}.column{@apply (--layout-vertical);}.row > .flex,
      .input-row > *{@apply (--layout-flex);}.input-row > *:not(:first-child){margin-left:8px;}.shop-select-label{line-height:20px;}.total-row{font-weight:500;margin:30px 0;}.winner{padding:10px 0px;margin-left:15px;@apply (--file-upload-file);}.enabled{border:1px solid #555;@apply (--file-upload-upload-border-enabled);}.hover{opacity:.7;border:1px dashed #111;@apply (--file-upload-upload-border-hover);}#UploadBorder{vertical-align:middle;color:#555;padding-top:20px;padding-bottom:20px;max-height:300px;width:100%;overflow-y:auto;margin-top:15px;display:inline-block;border:1px solid #555;@apply (--file-upload-upload-border);}#dropArea{text-align:center;@apply (--file-upload-drop-area);}.commands{float:right;margin-right:10px;@apply (--file-upload-commands);}.commands iron-icon:not([icon="check-circle"]){cursor:pointer;opacity:.9;@apply (--file-upload-commands-faded);}.commands iron-icon:hover{opacity:1;@apply (--file-upload-commands-hovered);}[hidden]{display:none;}@media (max-width: 767px){.grid{display:block;margin-top:0;}.grid > section:not(:first-child){margin-left:0;}.papericonitemimg{border-radius:50%;width:80px;height:80px;}}</style><firebase-auth id="auth" provider="email" signed-in="{{signedIn}}" user="{{user}}" on-error="handleError"></firebase-auth><firebase-document path="/users" data="{{usersdata}}"></firebase-document><app-indexeddb-mirror session="[[user.uid]]" key="userslist" data="{{usersdata}}" persisted-data="{{users}}"></app-indexeddb-mirror><app-header role="navigation" id="header" effects="waterfall" hidden="[[!signedin]]" condenses="" reveals=""><app-toolbar><div class="left-bar-item"><paper-icon-button class="menu-btn" icon="menu" on-click="_toggleDrawer" aria-label="Categories"></paper-icon-button></div><div class="logo" main-title=""><a href="#/" aria-label="SHOP Home">PROJECTAGRAM</a></div></app-toolbar></app-header><div class="main-frame"><iron-pages selected="[[state]]" attr-for-selected="state"><div state="init"><form id="checkoutForm" is="iron-form" method="post" action="/data/sample_success_response.json" on-iron-form-response="_didReceiveResponse" on-iron-form-presubmit="_willSendRequest"><header class="subsection" visible$="{{hideFileListRe}}"><h1>Add Rewards and Regonition</h1><span>Please fill all the details of the R &amp; R properly...!!!!</span></header><div class="subsection grid" visible$="{{hideFileListRe}}"><section><h2 id="randrInfoHeading">R and R Details</h2><div class="row input-row"><div class="column"><shop-select><select id="date" name="date" required="" autocomplete="date" aria-label="Date"><option value="1st" selected="">01</option><option value="2nd">02</option><option value="3rd">03</option><option value="4th">04</option><option value="5th">05</option><option value="6th">06</option><option value="7th">07</option><option value="8th">08</option><option value="9th">09</option><option value="10th">10</option><option value="11th">11</option><option value="12th">12</option><option value="13th">13</option><option value="14th">14</option><option value="15th">15</option><option value="16th">16</option><option value="17th">17</option><option value="18th">18</option><option value="19th">19</option><option value="20th">20</option><option value="21st">21</option><option value="22nd">22</option><option value="23rd">23</option><option value="24th">24</option><option value="25th">25</option><option value="26th">26</option><option value="27th">27</option><option value="28th">28</option><option value="29th">29</option><option value="30th">30</option><option value="31st">31</option></select><shop-md-decorator aria-hidden="true"><shop-underline></shop-underline></shop-md-decorator></shop-select></div><div class="column"><shop-select><select id="month" name="month" required="" autocomplete="month" aria-label="Month"><option value="January" selected="">January</option><option value="February">February</option><option value="March">March</option><option value="April">April</option><option value="May">May</option><option value="June">June</option><option value="July">July</option><option value="August">August</option><option value="September">September</option><option value="October">October</option><option value="November">November</option><option value="December">December</option></select><shop-md-decorator aria-hidden="true"><shop-underline></shop-underline></shop-md-decorator></shop-select></div><div class="column"><shop-select><select id="year" name="year" required="" autocomplete="year" aria-label="Year"><option value="2016">2016</option><option value="2017" selected="">2017</option><option value="2018">2018</option><option value="2019">2019</option><option value="2020">2020</option><option value="2021">2021</option><option value="2022">2022</option><option value="2023">2023</option><option value="2024">2024</option></select><shop-md-decorator aria-hidden="true"><shop-underline></shop-underline></shop-md-decorator></shop-select></div></div><div class="row input-row"><shop-input><input type="textArea" id="accountDescription" name="accountDescription" placeholder="Description" required="" aria-labelledby="accountDescriptionLabel randrInfoHeading"><shop-md-decorator error-message="Invalid Description" aria-hidden="true"><label id="accountDescriptionLabel">Description</label><shop-underline></shop-underline></shop-md-decorator></shop-input></div></section><section><h2 id="usersInfoHeading">Users List</h2><div class="row input-row"><shop-input><vaadin-combo-box id="elementsbox" items="[[_toArrayUsers(users)]]" item-value-path="name" item-label-path="fullname" on-selected-item-changed="_itemselectedchanged"><template><paper-icon-item style="padding: 0"><paper-item-body two-line="" style="min-height: 0"><div style="text-transform: capitalize">[[item.fullname]]</div><div secondary="">[[item.email]]</div></paper-item-body></paper-icon-item></template></vaadin-combo-box><div id="UploadBorder" hidden$="{{hideFileList}}"><div id="dropArea">The winners are:</div><template is="dom-repeat" items="{{winners}}"><div class="winner"><div class="name"><span>{{item.fullname}}</span><div class="commands"><iron-icon icon="file-upload-icons:cancel" title="{{removeText}}" on-click="_cancelWinner" hidden$="{{item.complete}}"></iron-icon></div></div></div></template></div></shop-input></div></section></div><shop-button fullwidth="" responsive="" id="submitBox"><input class="fullwidth" type="button" on-click="_submit" value="ADD R-AND-R"></shop-button></form></div><header state="success"><h1>Thank you</h1><p>[[response.successMessage]]</p><shop-button responsive=""><a href="#/home">Go to Home</a></shop-button></header><header state="error"><h1>We couldn´t add the r and r at this moment.</h1><p id="errorMessage">[[response.errorMessage]]</p><shop-button responsive=""><a href="#/adduser">Try again</a></shop-button></header></iron-pages></div><app-route route="[[route]]" pattern="/:state" on-active-changed="_activeRouteHandler"></app-route><paper-spinner-lite active="[[waiting]]"></paper-spinner-lite></template><script>Polymer({is:'shop-addrandr',properties:{route:{type:Object,notify:!0},users:{type:Object,notify:!0},state:{type:String,value:'init'},winners:{type:Array,notify:!0,value:function(){return[]}},response:Object,visible:{type:Boolean,observer:'_visibleChanged'},hideFileList:{type:Boolean,value:!1},hideFileListRe:{type:Boolean,value:!0},waiting:{type:Boolean,readOnly:!0,reflectToAttribute:!0}},_toggleDrawer:function(){this.fire('toggle-drawer',null)},_submit:function(){if(this._validateForm())if(null==this.winners||0==this.winners.length){var b=document.createElement('shop-snackbar');Polymer.dom(this.root).appendChild(b),Polymer.dom(b).innerHTML='Please add some winners to continue',b.open()}else{this.$.checkoutForm.fire('iron-form-presubmit',null,{bubbles:!1});var c=this.$.auth.app,d=-1*Date.now(),f={title:this.$.month.value+' '+this.$.year.value,date:this.$.date.value+' '+this.$.month.value+' '+this.$.year.value,discussion:this.$.accountDescription.value,_timestamp:d},g=c.database().ref().child('randr').push().key,h={};if(h['/randr/'+g]=f,c.database().ref().update(h),this.winners)for(var l,j=this.winners.length,k=0;k<j;k++)l=this.winners[k],c.database().ref().child('/randr/'+g+'/winners/'+l.name).set(l.name);this.debounce('_submitForm',function(){this.$.checkoutForm.fire('iron-form-response',{response:{success:1,successMessage:'R and R Added Successfully..!!'}},{bubbles:!1})},1e3)}},_pushState:function(a){this._validState=a,this.set('route.path',a);Polymer.AppLayout.scroll({top:0,behavior:'silent'})},cancel:function(a){a&&this.splice('winners',this.winners.indexOf(a),1)},_cancelWinner:function(a){this.cancel(a.model.__data__.item)},_activeRouteHandler:function(a){var b=a.target;if(a.detail.value){var c=b.data.state;if(this._validState===c)return this.state=c,void(this._validState='')}this.state='init'},_reset:function(){var a=this.$.checkoutForm;this._setWaiting(!1),a.reset(),this.set('winners',[]);for(var b,c=0;b=a.elements[c],c<a.elements.length;c++)b.removeAttribute('aria-invalid')},_validateForm:function(){for(var c,a=this.$.checkoutForm,b=!1,d=0;c=a.elements[d],d<a.elements.length;d++)c.checkValidity()?c.removeAttribute('aria-invalid'):(b||(c.nextElementSibling&&this.fire('announce',c.nextElementSibling.getAttribute('error-message')),c.scrollIntoViewIfNeeded?c.scrollIntoViewIfNeeded():c.scrollIntoView(!1),c.focus(),b=!0),c.setAttribute('aria-invalid','true'));return!b},_willSendRequest:function(a){var b=a.target,c=b.request.body;this._setWaiting(!0)},_didReceiveResponse:function(a){var b=a.detail.response;this.response=b,this._setWaiting(!0),b.success?(this._pushState('success'),this._reset()):(this._pushState('error'),this._reset())},_itemselectedchanged:function(a){if(a.detail&&null!=a.detail.value){var b=a.detail.value;b.complete=!1,-1==this.winners.indexOf(b)&&this.push('winners',b)}},_visibleChanged:function(a){a&&(this._reset(),this.fire('change-section',{title:'Add R&R'}))},_toArray:function(a){return Object.keys(a).map(function(b){return{name:b,value:a[b]}})},_toArrayUsers:function(a){return Object.keys(a).map(function(b){return{name:b,fullname:a[b].name,email:a[b].emailId}})}});</script></dom-module></body></html>