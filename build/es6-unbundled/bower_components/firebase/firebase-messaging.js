(function(){var i=function(Ca,Da){function Ea(){}for(var Fa in Ea.prototype=Da.prototype,Ca.prototype=new Ea,Da)if(Object.defineProperties){var Ga=Object.getOwnPropertyDescriptor(Da,Fa);Ga&&Object.defineProperty(Ca,Fa,Ga)}else Ca[Fa]=Da[Fa]},j=this,o=function(Ca){var Da=typeof Ca;if("object"==Da){if(Ca){if(Ca instanceof Array)return"array";if(Ca instanceof Object)return Da;var Ea=Object.prototype.toString.call(Ca);if("[object Window]"==Ea)return"object";if("[object Array]"==Ea||"number"==typeof Ca.length&&"undefined"!=typeof Ca.splice&&"undefined"!=typeof Ca.propertyIsEnumerable&&!Ca.propertyIsEnumerable("splice"))return"array";if("[object Function]"==Ea||"undefined"!=typeof Ca.call&&"undefined"!=typeof Ca.propertyIsEnumerable&&!Ca.propertyIsEnumerable("call"))return"function"}else return"null";}else if("function"==Da&&"undefined"==typeof Ca.call)return"object";return Da},s=function(Ca,Da){function Ea(){}Ea.prototype=Da.prototype,Ca.B=Da.prototype,Ca.prototype=new Ea,Ca.u=function(Fa,Ga){for(var Ia=Array(arguments.length-2),Ja=2;Ja<arguments.length;Ja++)Ia[Ja-2]=arguments[Ja];return Da.prototype[Ga].apply(Fa,Ia)}},Y={},Z=(Y["only-available-in-window"]="This method is available in a Window context.",Y["only-available-in-sw"]="This method is available in a service worker context.",Y["should-be-overriden"]="This method should be overriden by extended classes.",Y["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",Y["permission-default"]="The required permissions were not granted and dismissed instead.",Y["permission-blocked"]="The required permissions were not granted and blocked instead.",Y["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Y["notifications-blocked"]="Notifications have been blocked.",Y["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Y["sw-registration-expected"]="A service worker registration was the expected input.",Y["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",Y["invalid-saved-token"]="Unable to access details of the saved token.",Y["sw-reg-redundant"]="The service worker being used for push was made redundant.",Y["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$message}",Y["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Y["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",Y["use-sw-before-get-token"]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",Y["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",Y["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",Y["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",Y["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",Y["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",Y["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",Y["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",Y["failed-to-delete-token"]="Unable to delete the currently saved token.",Y["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",Y["incorrect-gcm-sender-id"]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",Y["bad-scope"]="The service worker scope must be a string with at least one character.",Y["bad-vapid-key"]="The public VAPID key must be a string with at least one character.",Y["failed-delete-vapid-key"]="The VAPID key could not be deleted.",Y),$={userVisibleOnly:!0,applicationServerKey:new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110])},_=function(Ca,Da){var Ea={};return Ea["firebase-messaging-msg-type"]=Ca,Ea["firebase-messaging-msg-data"]=Da,Ea},aa=function(Ca){if(Error.captureStackTrace)Error.captureStackTrace(this,aa);else{var Da=Error().stack;Da&&(this.stack=Da)}Ca&&(this.message=Ca+"")};s(aa,Error);var ba=function(Ca){for(var Ea=Ca.split("%s"),Fa="",Ga=Array.prototype.slice.call(arguments,1);Ga.length&&1<Ea.length;)Fa+=Ea.shift()+Ga.shift();return Fa+Ea.join("%s")};new firebase.INTERNAL.ErrorFactory("messaging","Messaging",Z);var ca=function(Ca,Da){Da.unshift(Ca),aa.call(this,ba.apply(null,Da)),Da.shift()};s(ca,aa);var da=function(Ca,Da){if(!Ca){var Fa="Assertion failed";if(Da)var Fa=Fa+(": "+Da),Ga=Array.prototype.slice.call(arguments,2);throw new ca(""+Fa,Ga||[])}},ea=null,fa=function(Ca){Ca=new Uint8Array(Ca);var Da=o(Ca);if(da("array"==Da||"object"==Da&&"number"==typeof Ca.length,"encodeByteArray takes an array as a parameter"),!ea)for(ea={},Da=0;65>Da;Da++)ea[Da]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(Da);for(var Da=ea,Ea=[],Fa=0;Fa<Ca.length;Fa+=3){var Ga=Ca[Fa],Ha=Fa+1<Ca.length,Ia=Ha?Ca[Fa+1]:0,Ja=Fa+2<Ca.length,Ka=Ja?Ca[Fa+2]:0,Ga=(3&Ga)<<4|Ia>>4,Ia=(15&Ia)<<2|Ka>>6,Ka=63&Ka;Ja||(Ka=64,Ha||(Ia=64)),Ea.push(Da[Ga>>2],Da[Ga],Da[Ia],Da[Ka])}return Ea.join("").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},ga=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",Z),ha=function(){this.a=null},ia=function(Ca){return Ca.a?Ca.a:(Ca.a=new Promise(function(Da,Ea){var Fa=j.indexedDB.open("fcm_token_details_db",1);Fa.onerror=function(Ga){Ea(Ga.target.error)},Fa.onsuccess=function(Ga){Da(Ga.target.result)},Fa.onupgradeneeded=function(Ga){Ga=Ga.target.result.createObjectStore("fcm_token_object_Store",{keyPath:"swScope"}),Ga.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),Ga.createIndex("fcmToken","fcmToken",{unique:!0})}}),Ca.a)},ja=function(Ca){Ca.a?Ca.a.then(function(Da){Da.close(),Ca.a=null}):Promise.resolve()},ka=function(Ca,Da){return ia(Ca).then(function(Ea){return new Promise(function(Fa,Ga){var Ha=Ea.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").index("fcmToken").get(Da);Ha.onerror=function(Ia){Ga(Ia.target.error)},Ha.onsuccess=function(Ia){Fa(Ia.target.result)}})})},la=function(Ca,Da){return ia(Ca).then(function(Ea){return new Promise(function(Fa,Ga){var Ha=[],Ia=Ea.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").openCursor();Ia.onerror=function(Ja){Ga(Ja.target.error)},Ia.onsuccess=function(Ja){(Ja=Ja.target.result)?(Ja.value.fcmSenderId===Da&&Ha.push(Ja.value),Ja.continue()):Fa(Ha)}})})},ma=function(Ca,Da,Ea){var Fa=fa(Da.getKey("p256dh")),Ga=fa(Da.getKey("auth"));return Ca="authorized_entity="+Ca+"&"+("endpoint="+Da.endpoint+"&")+("encryption_key="+Fa+"&")+("encryption_auth="+Ga),Ea&&(Ca+="&pushSet="+Ea),Ea=new Headers,Ea.append("Content-Type","application/x-www-form-urlencoded"),fetch("https://fcm.googleapis.com/fcm/connect/subscribe",{method:"POST",headers:Ea,body:Ca}).then(function(Ha){return Ha.json()}).then(function(Ha){if(Ha.error)throw ga.create("token-subscribe-failed",{message:Ha.error.message});if(!Ha.token)throw ga.create("token-subscribe-no-token");if(!Ha.pushSet)throw ga.create("token-subscribe-no-push-set");return{token:Ha.token,pushSet:Ha.pushSet}})},na=function(Ca,Da,Ea,Fa,Ga,Ha){var Ia={swScope:Ea.scope,endpoint:Fa.endpoint,auth:fa(Fa.getKey("auth")),p256dh:fa(Fa.getKey("p256dh")),fcmToken:Ga,fcmPushSet:Ha,fcmSenderId:Da};return ia(Ca).then(function(Ja){return new Promise(function(Ka,La){var Ma=Ja.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").put(Ia);Ma.onerror=function(Na){La(Na.target.error)},Ma.onsuccess=function(){Ka()}})})};ha.prototype.i=function(Ca,Da){return Da instanceof ServiceWorkerRegistration?"string"!==typeof Ca||0===Ca.length?Promise.reject(ga.create("bad-sender-id")):la(this,Ca).then(function(Ea){if(0!==Ea.length){var Fa=Ea.findIndex(function(Ga){return Da.scope===Ga.swScope&&Ca===Ga.fcmSenderId});if(-1!==Fa)return Ea[Fa]}}).then(function(Ea){if(Ea)return Da.pushManager.getSubscription().catch(function(){throw ga.create("get-subscription-failed")}).then(function(Fa){var Ga;if((Ga=Fa)&&(Ga=Fa.endpoint===Ea.endpoint&&fa(Fa.getKey("auth"))===Ea.auth&&fa(Fa.getKey("p256dh"))===Ea.p256dh),Ga)return Ea.fcmToken})}):Promise.reject(ga.create("sw-registration-expected"))},ha.prototype.getSavedToken=ha.prototype.i,ha.prototype.h=function(Ca,Da){var Ea=this;return"string"!==typeof Ca||0===Ca.length?Promise.reject(ga.create("bad-sender-id")):Da instanceof ServiceWorkerRegistration?Da.pushManager.getSubscription().then(function(Fa){return Fa?Fa:Da.pushManager.subscribe($)}).then(function(Fa){return ma(Ca,Fa).then(function(Ga){return na(Ea,Ca,Da,Fa,Ga.token,Ga.pushSet).then(function(){return Ga.token})})}):Promise.reject(ga.create("sw-registration-expected"))},ha.prototype.createToken=ha.prototype.h,ha.prototype.deleteToken=function(Ca){var Da=this;return"string"!==typeof Ca||0===Ca.length?Promise.reject(ga.create("invalid-delete-token")):ka(this,Ca).then(function(Ea){if(!Ea)throw ga.create("delete-token-not-found");return ia(Da).then(function(Fa){return new Promise(function(Ga,Ha){var Ia=Fa.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").delete(Ea.swScope);Ia.onerror=function(Ja){Ha(Ja.target.error)},Ia.onsuccess=function(Ja){0===Ja.target.result?Ha(ga.create("failed-to-delete-token")):Ga(Ea)}})})})};var oa=function(Ca){var Da=this;if(this.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",Z),!Ca.options.messagingSenderId||"string"!==typeof Ca.options.messagingSenderId)throw this.a.create("bad-sender-id");this.l=Ca.options.messagingSenderId,this.c=new ha,this.app=Ca,this.INTERNAL={},this.INTERNAL.delete=function(){return Da.delete}};oa.prototype.getToken=function(){var Ca=this,Da=Notification.permission;return"granted"===Da?this.f().then(function(Ea){return Ca.c.i(Ca.l,Ea).then(function(Fa){return Fa?Fa:Ca.c.h(Ca.l,Ea)})}):"denied"===Da?Promise.reject(this.a.create("notifications-blocked")):Promise.resolve(null)},oa.prototype.getToken=oa.prototype.getToken,oa.prototype.deleteToken=function(Ca){var Da=this;return this.c.deleteToken(Ca).then(function(){return Da.f()}).then(function(Ea){return Ea?Ea.pushManager.getSubscription():null}).then(function(Ea){if(Ea)return Ea.unsubscribe()})},oa.prototype.deleteToken=oa.prototype.deleteToken,oa.prototype.f=function(){throw this.a.create("should-be-overriden")},oa.prototype.requestPermission=function(){throw this.a.create("only-available-in-window")},oa.prototype.useServiceWorker=function(){throw this.a.create("only-available-in-window")},oa.prototype.useServiceWorker=oa.prototype.useServiceWorker,oa.prototype.onMessage=function(){throw this.a.create("only-available-in-window")},oa.prototype.onMessage=oa.prototype.onMessage,oa.prototype.onTokenRefresh=function(){throw this.a.create("only-available-in-window")},oa.prototype.onTokenRefresh=oa.prototype.onTokenRefresh,oa.prototype.setBackgroundMessageHandler=function(){throw this.a.create("only-available-in-sw")},oa.prototype.setBackgroundMessageHandler=oa.prototype.setBackgroundMessageHandler,oa.prototype.delete=function(){ja(this.c)};var pa=self,qa=function(Ca){oa.call(this,Ca);var Da=this;this.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",Z),pa.addEventListener("push",function(Ea){return ra(Da,Ea)},!1),pa.addEventListener("pushsubscriptionchange",function(Ea){return sa(Da,Ea)},!1),pa.addEventListener("notificationclick",function(Ea){return ta(Da,Ea)},!1),this.b=null};i(qa,oa);var ra=function(Ca,Da){var Ea;try{Ea=Da.data.json()}catch(Ga){return}var Fa=wa().then(function(Ga){if(!Ga){if((Ga=Ea)&&"object"===typeof Ga.notification){var Ha=Object.assign({},Ga.notification),Ia={};Ha.data=(Ia.FCM_MSG=Ga,Ia),Ga=Ha}else Ga=void 0;if(Ga)return pa.registration.showNotification(Ga.title||"",Ga);if(Ca.b)return Ca.b(Ea)}else if(Ea.notification||Ca.b)return xa(Ca,Ea)});Da.waitUntil(Fa)},sa=function(Ca,Da){var Ea=Ca.getToken().then(function(Fa){if(!Fa)throw Ca.a.create("no-fcm-token-for-resubscribe");var Ga=Ca.c;return ka(Ga,Fa).then(function(Ha){if(!Ha)throw Ca.a.create("invalid-saved-token");return pa.registration.pushManager.subscribe($).then(function(Ia){return ma(Ha.w,Ia,Ha.v)}).catch(function(Ia){return Ga.deleteToken(Ha.A).then(function(){throw Ca.a.create("unable-to-resubscribe",{message:Ia})})})})});Da.waitUntil(Ea)},ta=function(Ca,Da){if(Da.notification&&Da.notification.data&&Da.notification.data.FCM_MSG){Da.stopImmediatePropagation(),Da.notification.close();var Ea=Da.notification.data.FCM_MSG,Fa=Ea.notification.click_action;if(Fa){var Ga=ua(Fa).then(function(Ha){return Ha?Ha:pa.clients.openWindow(Fa)}).then(function(Ha){if(Ha)return delete Ea.notification,va(Ca,Ha,_("notification-clicked",Ea))});Da.waitUntil(Ga)}}};qa.prototype.setBackgroundMessageHandler=function(Ca){if(Ca&&"function"!==typeof Ca)throw this.a.create("bg-handler-function-expected");this.b=Ca},qa.prototype.setBackgroundMessageHandler=qa.prototype.setBackgroundMessageHandler;var ua=function(Ca){var Da=new URL(Ca).href;return pa.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(Ea){for(var Fa=null,Ga=0;Ga<Ea.length;Ga++)if(new URL(Ea[Ga].url).href===Da){Fa=Ea[Ga];break}if(Fa)return Fa.focus(),Fa})},va=function(Ca,Da,Ea){return new Promise(function(Fa,Ga){return Da?void(Da.postMessage(Ea),Fa()):Ga(Ca.a.create("no-window-client-to-msg"))})},wa=function(){return pa.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(Ca){return Ca.some(function(Da){return"visible"===Da.visibilityState})})},xa=function(Ca,Da){return pa.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(Ea){var Fa=_("push-msg-received",Da);return Promise.all(Ea.map(function(Ga){return va(Ca,Ga,Fa)}))})};qa.prototype.f=function(){return Promise.resolve(pa.registration)};var ya=function(Ca){oa.call(this,Ca);var Da=this;this.j=null,this.m=firebase.INTERNAL.createSubscribe(function(Ea){Da.j=Ea}),this.s=null,this.o=firebase.INTERNAL.createSubscribe(function(Ea){Da.s=Ea}),Ba(this)};i(ya,oa),ya.prototype.getToken=function(){var Ca=this;return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")?za(this).then(function(){return oa.prototype.getToken.call(Ca)}):Promise.reject(this.a.create("unsupported-browser"))},ya.prototype.getToken=ya.prototype.getToken;var za=function(Ca){if(Ca.g)return Ca.g;var Da=document.querySelector("link[rel=\"manifest\"]");return Ca.g=Da?fetch(Da.href).then(function(Ea){return Ea.json()}).catch(function(){return Promise.resolve()}).then(function(Ea){if(Ea&&Ea.gcm_sender_id&&"103953800507"!==Ea.gcm_sender_id)throw Ca.a.create("incorrect-gcm-sender-id")}):Promise.resolve(),Ca.g};ya.prototype.requestPermission=function(){var Ca=this;return"granted"===Notification.permission?Promise.resolve():new Promise(function(Da,Ea){var Fa=function(Ha){return"granted"===Ha?Da():"denied"===Ha?Ea(Ca.a.create("permission-blocked")):Ea(Ca.a.create("permission-default"))},Ga=Notification.requestPermission(function(Ha){Ga||Fa(Ha)});Ga&&Ga.then(Fa)})},ya.prototype.requestPermission=ya.prototype.requestPermission,ya.prototype.useServiceWorker=function(Ca){if(!(Ca instanceof ServiceWorkerRegistration))throw this.a.create("sw-registration-expected");if("undefined"!==typeof this.b)throw this.a.create("use-sw-before-get-token");this.b=Ca},ya.prototype.useServiceWorker=ya.prototype.useServiceWorker,ya.prototype.onMessage=function(Ca,Da,Ea){return this.m(Ca,Da,Ea)},ya.prototype.onMessage=ya.prototype.onMessage,ya.prototype.onTokenRefresh=function(Ca,Da,Ea){return this.o(Ca,Da,Ea)},ya.prototype.onTokenRefresh=ya.prototype.onTokenRefresh;var Aa=function(Ca,Da){var Ea=Da.installing||Da.waiting||Da.active;return new Promise(function(Fa,Ga){if(!Ea)Ga(Ca.a.create("no-sw-in-reg"));else if("activated"===Ea.state)Fa(Da);else if("redundant"===Ea.state)Ga(Ca.a.create("sw-reg-redundant"));else{var Ha=function(){if("activated"===Ea.state)Fa(Da);else if("redundant"===Ea.state)Ga(Ca.a.create("sw-reg-redundant"));else return;Ea.removeEventListener("statechange",Ha)};Ea.addEventListener("statechange",Ha)}})};ya.prototype.f=function(){var Ca=this;return this.b?Aa(this,this.b):(this.b=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(Da){throw Ca.a.create("failed-serviceworker-registration",{browserErrorMessage:Da.message})}).then(function(Da){return Aa(Ca,Da).then(function(){return Ca.b=Da,Da.update(),Da})}))};var Ba=function(Ca){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(Da){if(Da.data&&Da.data["firebase-messaging-msg-type"])switch(Da=Da.data,Da["firebase-messaging-msg-type"]){case"push-msg-received":case"notification-clicked":Ca.j.next(Da["firebase-messaging-msg-data"]);}},!1)};if(!(firebase&&firebase.INTERNAL&&firebase.INTERNAL.registerService))throw Error("Cannot install Firebase Messaging - be sure to load firebase-app.js first.");firebase.INTERNAL.registerService("messaging",function(Ca){return self&&"ServiceWorkerGlobalScope"in self?new qa(Ca):new ya(Ca)},{Messaging:ya})}).call(this);