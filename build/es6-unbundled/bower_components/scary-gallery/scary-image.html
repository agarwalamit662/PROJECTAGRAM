<html><head><link rel="import" href="../polymer/polymer.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"></head><body><dom-module id="scary-image"><template><style>:host{display:inline-block;overflow:hidden;position:relative;}#baseURIAnchor{display:none;}#sizedImgDiv{position:absolute;top:0px;right:0px;bottom:0px;left:0px;display:block;background-size:cover;background-position:center;background-repeat:no-repeat;}#img{display:none;}.downloadclass{position:absolute;bottom:0;right:0;margin-right:10px;text-align:right;color:white;padding:5px;background-color:black;border-radius:10px;border:2px solid;font-size:0.5em;}</style><a id="baseURIAnchor" href="#"></a><div id="sizedImgDiv" role="img" aria-hidden$="[[_computeImgDivARIAHidden(alt)]]" aria-label$="[[_computeImgDivARIALabel(alt, src)]]"><p id="downloadlink" class="downloadclass"></p></div><img id="img" on-load="_imgOnLoad" on-error="_imgOnError"></template><script>Polymer({is:'scary-image',properties:{src:{type:String,value:''},alt:{type:String,value:null},loaded:{notify:!0,readOnly:!0,type:Boolean,value:!1},loading:{notify:!0,readOnly:!0,type:Boolean,value:!1},error:{notify:!0,readOnly:!0,type:Boolean,value:!1},width:{observer:'_widthChanged',type:Number,value:null},height:{observer:'_heightChanged',type:Number,value:null},naturalWidth:{type:Number,notify:!0,computed:'_computeNaturalWidth(loaded)'},naturalHeight:{type:Number,notify:!0,computed:'_computeNaturalHeight(loaded)'}},observers:['_loadStateObserver(src)'],created:function(){this._resolvedSrc=''},_imgOnLoad:function(){this.$.img.src!==this._resolveSrc(this.src)||(this._setLoading(!1),this._setLoaded(!0),this._setError(!1))},_computeNaturalWidth:function(a){return a?this.$.img.naturalWidth:null},_computeNaturalHeight:function(a){return a?this.$.img.naturalHeight:null},_imgOnError:function(){this.$.img.src!==this._resolveSrc(this.src)||(this.$.img.removeAttribute('src'),this.$.sizedImgDiv.style.backgroundImage='',this._setLoading(!1),this._setLoaded(!1),this._setError(!0))},_computeImgDivARIAHidden:function(){return''===this.alt?'true':void 0},_computeImgDivARIALabel:function(){if(null!==this.alt)return this.alt;if(''===this.src)return'';var a=this._resolveSrc(this.src);return a.replace(/[?|#].*/g,'').split('/').pop()},_widthChanged:function(){this.style.width=isNaN(this.width)?this.width:this.width+'px'},_heightChanged:function(){this.style.height=isNaN(this.height)?this.height:this.height+'px'},_loadStateObserver:function(a){var b=this._resolveSrc(a);if(b!==this._resolvedSrc)if(this._resolvedSrc=b,this.$.img.removeAttribute('src'),this.$.sizedImgDiv.style.backgroundImage='',''===a)this._setLoading(!1),this._setLoaded(!1),this._setError(!1);else{this.$.img.src=this._resolvedSrc,this.$.sizedImgDiv.style.backgroundImage='url("'+this._resolvedSrc+'")';var c='<a style="text-decoration:none; color: white;" href="'+this._resolvedSrc+'" download>DOWNLOAD</a>',d=document.createElement('div');d.innerHTML=c;var e=d.firstChild;Polymer.dom(this.$.downloadlink).appendChild(e),this._setLoading(!0),this._setLoaded(!1),this._setError(!1)}},_resolveSrc:function(a){var b=Polymer.ResolveUrl.resolveUrl(a,this.$.baseURIAnchor.href);return'/'===b[0]&&(b=(location.origin||location.protocol+'//'+location.host)+b),b}});</script></dom-module></body></html>